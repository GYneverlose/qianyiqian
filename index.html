
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ç­¾ä¸€ç­¾ Â· å¸Œæœ›ç‰ˆ</title>
  <style>
    body {
      font-family: "Noto Serif SC", serif;
      background: url('https://cdn.jsdelivr.net/gh/wgpsec/static-host/images/xuan-paper-bg.jpg') repeat;
      background-size: cover;
      text-align: center;
      padding: 40px;
      color: #333;
    }
    .card {
      padding: 20px;
      margin: 20px auto;
      background: rgba(255,255,255,0.85);
      border: 2px solid #999;
      border-radius: 12px;
      width: 80%;
      box-shadow: 0 0 10px #ccc;
    }
    button {
      font-size: 18px;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      background: #3f3f3f;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    select {
      font-size: 16px;
      margin-bottom: 20px;
    }
    .golden-glow {
      animation: glow 2s infinite alternate;
      color: goldenrod;
    }
    @keyframes glow {
      from { text-shadow: 0 0 5px gold; }
      to { text-shadow: 0 0 20px goldenrod; }
    }
    .link-button {
      background: darkred;
    }
  </style>
</head>
<body>
  <h1>ç­¾ä¸€ç­¾ Â· å¸Œæœ›ç‰ˆ</h1>
  <p>è¯·é€‰æ‹©ç­¾æ± ï¼š</p>
  <select id="poolSelect">
    <option value="general">ç»¼åˆ</option>
    <option value="wealth">è´¢è¿</option>
    <option value="love">æ„Ÿæƒ…</option>
    <option value="career">äº‹ä¸š</option>
  </select>
  <div class="card" id="output">è¯·é™å¿ƒä¸‰æ¯ï¼Œé»˜å¿µæ‰€æ±‚ä¹‹äº‹ï¼Œå†å¼€å§‹æ‘‡ç­¾ã€‚</div>
  <button onclick="ritual()">ğŸ§˜ æ‘‡ç­¾å‰çš„ä»ªå¼</button>
  <button onclick="shake()">ğŸ´ æ‘‡ç­¾</button>
  <button onclick="draw()">âœ¨ æŠ½å­—å¡</button>
  <button onclick="showLibrary()" class="link-button">ğŸ¯ è—ç»é˜</button>
  <div id="library" style="display:none;" class="card"></div>
  <audio id="bell" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6d7616a962.mp3?filename=soft-bell-125039.mp3"></audio>
  <audio id="drawSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_d9b3e46a23.mp3?filename=game-reward-1-140081.mp3"></audio>

  <script>
    let fortunePoints = 0;
    let characters = ["ç¦", "ç¦„", "å¯¿", "å–œ", "å®‰", "å®", "ç¥¥", "é¡º", "åº·", "å‰"];
    let wordLibrary = JSON.parse(localStorage.getItem("wordLibrary") || "[]");

    const poems = {
      general: [
        { level: "ä¸Šä¸Šç­¾", poem: "é£é¡ºå¸†ç¨³æµ·å¤©é˜”", advice: "ä¸‡äº‹ç§°æ„ï¼Œç¦æ˜Ÿé«˜ç…§ã€‚" },
        { level: "ä¸Šç­¾", poem: "èŠ±å¼€æ­£å¥½è¿æ˜¥æ¥", advice: "è¿åŠ¿æ¸æ—ºï¼Œå¥½äº‹å°†è‡³ã€‚" },
        { level: "ä¸­ç­¾", poem: "æ°´è¿‡æ— ç—•é™è‡ªå®‰", advice: "å¹³å®‰æ˜¯ç¦ï¼Œç¨³ä¸­æ±‚è¿›ã€‚" }
      ],
      wealth: [
        { level: "ä¸Šä¸Šç­¾", poem: "è´¢æºæ»šæ»šç›ˆæ»¡å±‹", advice: "è´¢å¯Œä¹‹é—¨ä¸ºä½ æ•å¼€ã€‚" },
        { level: "ä¸Šç­¾", poem: "ä¸€åˆ†è€•è€˜ä¸€åˆ†æ”¶", advice: "åŠªåŠ›å°±ä¼šè§æˆæœã€‚" },
        { level: "ä¸­ç­¾", poem: "ä¸è¿›ä¸é€€å®ˆä¸ºå®‰", advice: "å¹³ç¨³ä¸­æ±‚å‘å±•ã€‚" }
      ],
      love: [
        { level: "ä¸Šä¸Šç­¾", poem: "è‰¯ç¼˜å¤©å®šå–œç›ˆé—¨", advice: "æ„Ÿæƒ…é¡ºåˆ©ï¼Œæ¡ƒèŠ±æ­£æ—ºã€‚" },
        { level: "ä¸Šç­¾", poem: "æœˆè€ç‰µçº¿æƒ…è‡ªæ¥", advice: "çœŸå¿ƒæ¢çœŸæƒ…ã€‚" },
        { level: "ä¸­ç­¾", poem: "å¿ƒé™æƒ…å®šç¼˜è‡ªåˆ", advice: "å†…å¿ƒå®‰ç¨³æ‰è¿ä½³äººã€‚" }
      ],
      career: [
        { level: "ä¸Šä¸Šç­¾", poem: "é¹ç¨‹ä¸‡é‡Œä»•é€”é¡º", advice: "äº‹ä¸šè…¾é£æ­£å½“æ—¶ã€‚" },
        { level: "ä¸Šç­¾", poem: "ç£¨åˆ€ä¸è¯¯ç æŸ´åŠŸ", advice: "å‡†å¤‡å……è¶³å†å‡ºå‘ã€‚" },
        { level: "ä¸­ç­¾", poem: "å‡¡äº‹æ…¢è¡Œå®šæœ‰æˆ", advice: "ç¨³æ‰ç¨³æ‰“ï¼Œæœªæ¥å¯æœŸã€‚" }
      ]
    };

    function ritual() {
      document.getElementById('output').innerHTML =
        `ğŸ§˜ è¯·é—­ä¸Šçœ¼ç›ï¼Œé»˜å¿µä½ æ‰€æ±‚ä¹‹äº‹...<br>å‡†å¤‡å¥½åå†ç‚¹ã€Œæ‘‡ç­¾ã€ã€‚`;
      document.getElementById("bell").play();
    }

    function shake() {
      let pool = document.getElementById("poolSelect").value;
      let list = poems[pool];
      let result = list[Math.floor(Math.random() * list.length)];
      let luckMap = { "ä¸­ç­¾": 0, "ä¸Šç­¾": 1, "ä¸Šä¸Šç­¾": 2 };
      fortunePoints += luckMap[result.level];
      document.getElementById("output").innerHTML =
        `<strong>${result.level}</strong>ï¼š<em>${result.poem}</em><br><br>` +
        `ğŸ“œ ç­¾æ„ï¼š${result.advice}<br>` +
        `ğŸ¯ å‘½è¿å€¼å˜åŠ¨ï¼š+${luckMap[result.level]}<br>` +
        `ğŸ“Š å½“å‰å‘½è¿å€¼ï¼š${fortunePoints}`;
      document.getElementById("bell").play();
    }

    function draw() {
      if (fortunePoints < 5) {
        alert("å‘½è¿å€¼ä¸è¶³ï¼Œè‡³å°‘éœ€è¦ 5 ç‚¹æ‰èƒ½æŠ½å­—å¡ã€‚");
        return;
      }
      fortunePoints -= 5;
      const c = characters[Math.floor(Math.random() * characters.length)];
      wordLibrary.push(c);
      localStorage.setItem("wordLibrary", JSON.stringify(wordLibrary));
      document.getElementById("output").innerHTML =
        `âœ¨ ä½ æŠ½åˆ°äº†å­—å¡ï¼šã€Œ<span class="golden-glow">${c}</span>ã€<br>` +
        `ğŸ“Š å½“å‰å‘½è¿å€¼ï¼š${fortunePoints}`;
      document.getElementById("drawSound").play();
    }

    function showLibrary() {
      let wordMap = {};
      wordLibrary.forEach(c => {
        wordMap[c] = (wordMap[c] || 0) + 1;
      });
      let html = `<h3>ğŸ¯ è—ç»é˜ Â· æ”¶é›†è¿›åº¦</h3>`;
      html += `<p>ä½ å·²æ”¶é›†ä»¥ä¸‹å­—å¡ï¼š</p><ul>`;
      for (const ch in wordMap) {
        html += `<li>${ch} Ã— ${wordMap[ch]}</li>`;
      }
      html += `</ul><p>ğŸ“Š å½“å‰å‘½è¿å€¼ï¼š${fortunePoints}</p>`;
      document.getElementById("library").style.display = "block";
      document.getElementById("library").innerHTML = html;
    }
  </script>
</body>
</html>
